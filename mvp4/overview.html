
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MVP4 Overview</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <object data="sidebar.html" type="text/html" width="260" height="100%"></object>

  <main class="main-content">
    <header>
      <h1>Strategic Overview</h1>
      <p class="subtitle">Manage your goals, risks, and KPIs here</p>
    </header>

    <!-- Goal Form -->
    <section class="input-form">
      <h2>Add New Goal</h2>
      <form id="goal-form">
        <label for="goal-title">Title:</label>
        <input type="text" id="goal-title" required />
        <label for="goal-desc">Description:</label>
        <input type="text" id="goal-desc" />
        <label for="goal-due">Due Date:</label>
        <input type="date" id="goal-due" />
        <label for="goal-owner">Owner:</label>
        <input type="text" id="goal-owner" />
        <button type="submit">Add Goal</button>
      </form>
    </section>

    <!-- Risk Form -->
    <section class="input-form">
      <h2>Add New Risk</h2>
      <form id="risk-form">
        <label for="risk-title">Title:</label>
        <input type="text" id="risk-title" required />
        <label for="risk-likelihood">Likelihood:</label>
        <input type="text" id="risk-likelihood" />
        <label for="risk-impact">Impact:</label>
        <input type="text" id="risk-impact" />
        <label for="risk-mitigation">Mitigation:</label>
        <input type="text" id="risk-mitigation" />
        <button type="submit">Add Risk</button>
      </form>
    </section>

    <!-- KPI Form -->
    <section class="input-form">
      <h2>Add New KPI</h2>
      <form id="kpi-form">
        <label for="kpi-title">Title:</label>
        <input type="text" id="kpi-title" required />
        <label for="kpi-metric">Metric:</label>
        <input type="text" id="kpi-metric" />
        <label for="kpi-target">Target Value:</label>
        <input type="text" id="kpi-target" />
        <button type="submit">Add KPI</button>
      </form>
    </section>
  </main>

  <script type="module">
    import { loadState, saveState, state } from './state.js';
    loadState();

    // Add Goal
    document.getElementById("goal-form").addEventListener("submit", (e) => {
      e.preventDefault();
      const newGoal = {
        id: `G_${Date.now()}`,
        title: document.getElementById("goal-title").value,
        desc: document.getElementById("goal-desc").value,
        dueDate: document.getElementById("goal-due").value,
        owner: document.getElementById("goal-owner").value
      };
      state.goals.push(newGoal);
      saveState();
      alert("Goal added!");
      e.target.reset();
    });

    // Add Risk
    document.getElementById("risk-form").addEventListener("submit", (e) => {
      e.preventDefault();
      const newRisk = {
        id: `R_${Date.now()}`,
        title: document.getElementById("risk-title").value,
        likelihood: document.getElementById("risk-likelihood").value,
        impact: document.getElementById("risk-impact").value,
        mitigation: document.getElementById("risk-mitigation").value
      };
      state.risks.push(newRisk);
      saveState();
      alert("Risk added!");
      e.target.reset();
    });

    // Add KPI
    document.getElementById("kpi-form").addEventListener("submit", (e) => {
      e.preventDefault();
      const newKPI = {
        id: `KPI_${Date.now()}`,
        title: document.getElementById("kpi-title").value,
        metric: document.getElementById("kpi-metric").value,
        target: document.getElementById("kpi-target").value
      };
      state.kpis.push(newKPI);
      saveState();
      alert("KPI added!");
      e.target.reset();
    });
  </script>
</body>
</html>
